<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
    <meta name="author" content="Coderthemes">

    <link rel="shortcut icon" href="~/assets/images/favicon.ico">

    <title>CAS - @ViewBag.Title</title>

    <!--Morris Chart CSS -->
    <link href="~/assets/plugins/toastr/toastr.min.css" rel="stylesheet" />
    <link href="~/assets/plugins/bootstrap-treefy-master/dist/css/bootstrap-treefy.css" rel="stylesheet" />
    <link href="~/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/menu.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/core.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/components.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/icons.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/pages.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/responsive.css" rel="stylesheet" type="text/css" />

    <!-- Plugins css-->
    <link href="~/assets/plugins/summernote/summernote.css" rel="stylesheet" />
    <link href="~/assets/plugins/jquery-ui-1.12.1.custom/jquery-ui.css" rel="stylesheet" />
    <link href="~/assets/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" rel="stylesheet" />
    <link href="~/assets/plugins/multiselect/css/multi-select.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/select2/dist/css/select2.css" rel="stylesheet" type="text/css">
    <link href="~/assets/plugins/select2/dist/css/select2-bootstrap.css" rel="stylesheet" type="text/css">
    <link href="~/assets/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css" rel="stylesheet" />
    <link href="~/assets/plugins/switchery/switchery.min.css" rel="stylesheet" />
    <link href="~/assets/plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">
    <link href="~/assets/plugins/mjolnic-bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="~/assets/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="~/assets/plugins/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
    <link href="~/assets/plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">


    <!-- HTML5 Shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="~/assets/js/modernizr.min.js"></script>
</head>

<body class="fixed-left">

    <!-- Begin page -->
    @if (Session["LoginCredentials"] != null)
    {
        <div id="wrapper">
            @Html.Partial("_Menu")
            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->
            <div class="content-page">
                <!-- Start content -->
                <div class="content">
                    <div class="container">
                        @RenderBody()
                    </div> <!-- container -->
                </div> <!-- content -->

                <footer class="footer">
                    @DateTime.Now.Year © CAS. Design by <a href="https://www.quitec.com.ec/" target="_blank" class="text-muted">Quitec</a>
                </footer>
            </div>
            <!-- ============================================================== -->
            <!-- End Right content here -->
            <!-- ============================================================== -->
            <!-- Right Sidebar -->
            <div class="side-bar right-bar">
                <a href="javascript:void(0);" class="right-bar-toggle">
                    <i class="zmdi zmdi-close-circle-o"></i>
                </a>
                <h4 class="">Notificaciones</h4>
                <div class="notification-list nicescroll">
                </div>
            </div>
            <!-- /Right-bar -->
        </div>

        <div id="panel-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content p-0 b-0">
                    <div id="body_modal" class="panel panel-color panel-primary">

                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    }
    else
    {
        Response.Redirect(Url.Action("Login", "Account"));
    }

    <!-- END wrapper -->

    <script>
        var resizefunc = [];
    </script>

    <!-- jQuery  -->
    <script src="~/assets/js/jquery.min.js"></script>
    @*<script src="~/~/assets/js/jquery.min.js"></script>*@
    <script src="~/assets/js/bootstrap.min.js"></script>
    <script src="~/assets/plugins/printMe-master/jquery-printme.min.js"></script>
    <script src="~/assets/plugins/bootstrap-treefy-master/dist/bootstrap-treefy.js"></script>
    <script src="~/assets/js/detect.js"></script>
    <script src="~/assets/js/fastclick.js"></script>
    <script src="~/assets/js/jquery.slimscroll.js"></script>
    <script src="~/assets/js/jquery.blockUI.js"></script>
    <script src="~/assets/js/waves.js"></script>
    <script src="~/assets/js/wow.min.js"></script>
    <script src="~/assets/js/jquery.nicescroll.js"></script>
    <script src="~/assets/js/jquery.scrollTo.min.js"></script>

    <!-- Counter Up  -->
    <script src="~/assets/plugins/waypoints/lib/jquery.waypoints.js"></script>
    <script src="~/assets/plugins/counterup/jquery.counterup.min.js"></script>

    <!-- Modal-Effect -->
    <script src="~/assets/plugins/custombox/dist/custombox.min.js"></script>
    <script src="~/assets/plugins/custombox/dist/legacy.min.js"></script>

    <!-- Plugins-->
    <script src="~/assets/plugins/jquery.filer/js/bootstrap-filestyle.min.js"></script>
    <!-- FileInput js -->
    <script src="~/assets/plugins/bootstrap-fileinput-master/js/plugins/purify.min.js"></script>
    <script src="~/assets/plugins/bootstrap-fileinput-master/js/fileinput.min.js"></script>
    <!-- Summernote js-->
    <script src="~/assets/plugins/summernote/summernote.min.js"></script>
    <script src="~/assets/plugins/isotope/js/isotope.pkgd.min.js"></script>
    <script src="~/assets/plugins/select2/dist/js/select2.min.js" type="text/javascript"></script>
    <script src="~/assets/plugins/moment/moment.js"></script>
    <script src="~/assets/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script src="~/assets/plugins/mjolnic-bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
    <script src="~/assets/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="~/assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="~/assets/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script src="~/assets/plugins/bootstrap-inputmask/bootstrap-inputmask.min.js" type="text/javascript"></script>

    <!-- FileInput js -->
    <!-- purify.min.js is only needed if you wish to purify HTML content in your preview for HTML files.
     This must be loaded before fileinput.min.js -->
    <script src="~/assets/plugins/bootstrap-fileinput-master/js/plugins/purify.min.js"></script>
    <!-- the main fileinput plugin file -->
    <script src="~/assets/plugins/bootstrap-fileinput-master/js/fileinput.min.js"></script>
    <script src="~/assets/plugins/toastr/toastr.min.js"></script>

    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>

    <script src="~/assets/plugins/isotope/js/isotope.pkgd.min.js"></script>


    <!-- App js -->
    <script src="~/assets/js/jquery.core.js"></script>
    <script src="~/assets/js/jquery.app.js"></script>
    @RenderSection("scripts", required: false)
    @Html.Partial("_Toastr")

    <script>


        $('#notif').on('click', function (e) {

            $.ajax({
                type: "POST",
                url: '@Url.Action("Notificacion", "Account")',
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                data: {},
                success: function (d) {
                    ////$("#time").text(d);
                    $('.notification-list').html(d);
                },
                error: function (xhr, textStatus, errorThrown) {
                    //alert('Error!!');
                }
            });
        });




        setInterval(function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ContadorNotificacion", "Account")',
                content: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (d) {
                    if (d != 0) {
                        $("#badge_count").text(d);
                    }
                    else {
                        $("#badge_count").text("");
                    }
                },
                error: function (xhr, textStatus, errorThrown) {
                    //alert('Error!!');
                }
            });
        }, 1000);

        function VerNotificacion(noteid) {
            $.ajax({
                type: "POST",
                url: '@Url.Action("NotificacionVer", "Account")',
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                data: JSON.stringify({ "ID_NOTIFICACION": noteid }),
                success: function (d) {
                    ////$("#time").text(d);
                    $('#body_modal').html(d);
                },
                error: function (xhr, textStatus, errorThrown) {
                    //alert('Error!!');
                }
            });

            $('#panel-modal').modal('show')
        }


        //session end
        var sessionTimeoutWarning = @Session.Timeout -1;

        var sTimeout = parseInt(sessionTimeoutWarning) * 60 * 1000;
        setTimeout('SessionEnd()', sTimeout);

        function SessionEnd() {
            window.location = '@Url.Action("LogOut", "Account")';
        }

    </script>

</body>

</html>

